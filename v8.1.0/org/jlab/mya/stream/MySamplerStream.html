<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>MySamplerStream (jmyapi 8.1.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.jlab.mya.stream, class: MySamplerStream">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.jlab.mya.stream</a></div>
<h1 title="Class MySamplerStream" class="title">Class MySamplerStream&lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="EventStream.html" title="class in org.jlab.mya.stream">org.jlab.mya.stream.EventStream</a>&lt;T&gt;
<div class="inheritance"><a href="WrappedStream.html" title="class in org.jlab.mya.stream">org.jlab.mya.stream.WrappedStream</a>&lt;T,<wbr>T&gt;
<div class="inheritance"><a href="BoundaryAwareStream.html" title="class in org.jlab.mya.stream">org.jlab.mya.stream.BoundaryAwareStream</a>&lt;T&gt;
<div class="inheritance">org.jlab.mya.stream.MySamplerStream&lt;T&gt;</div>
</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The Event type (FloatEvent, IntEvent, etc.)</dd>
</dl>
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/Channel.html" title="class or interface in java.nio.channels" class="external-link">Channel</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">MySamplerStream&lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</span>
<span class="extends-implements">extends <a href="BoundaryAwareStream.html" title="class in org.jlab.mya.stream">BoundaryAwareStream</a>&lt;T&gt;</span></div>
<div class="block">This is a class mimics the command line mySampler application.  It implements two different strategies, sampling from
 the data as it is streamed through the library (STREAM), and repeatedly querying the database for each sampled point
 (N_QUERIES). Different constructors create streams that use either of these two strategy or a hybrid approach that
 attempts to sampling from the data stream until the stream is observed to be too busy at which point the stream
 switches to repeatedly querying the database.  Determining when to switch strategies is not universally obvious, but
 this class uses default settings that should be a reasonable starting point.
 <p>
 For streams where the Event update rate is less than the requested sample rate, then it is obviously better to make
 one query and stream all the underlying data.  For streams where the Event update rate is much, much, greater than
 the requested sample rate, making multiple queries to the database is obviously better.  The setBuffer and
 setStreamThreshold methods are provided to tune the switching behavior.  In most cases, changing the streamThreshold
 (max number of events per sample) is all that should be needed.
 <p>
 Factory methods are provided to simplify the construction.  Since this extends BoundaryAwareStream, the factory
 methods are especially in dealing with the priorPoint which is always required for MySamplerStream.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="MySamplerStream.Strategy.html" class="type-name-link" title="enum in org.jlab.mya.stream">MySamplerStream.Strategy</a></code></div>
<div class="col-last even-row-color">
<div class="block">The different sampling strategies that can be used.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.jlab.mya.stream.BoundaryAwareStream">Fields inherited from class&nbsp;org.jlab.mya.stream.<a href="BoundaryAwareStream.html" title="class in org.jlab.mya.stream">BoundaryAwareStream</a></h3>
<code><a href="BoundaryAwareStream.html#begin">begin</a>, <a href="BoundaryAwareStream.html#now">now</a>, <a href="BoundaryAwareStream.html#updatesOnly">updatesOnly</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Close this stream and the stream it wraps if it exists.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBufferCheck()" class="member-name-link">getBufferCheck</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is how many Events should be streamed between making estimates of stream update rate.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBufferCount()" class="member-name-link">getBufferCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is how many Events have been read since the last trackBuffer call.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBufferDelay()" class="member-name-link">getBufferDelay</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is how many events should be skipped at the beginning of the stream prior to estimating the stream update
 rate.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBufferSize()" class="member-name-link">getBufferSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is how many Event updates will be used to estimate stream update rate.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;<br><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMySamplerStream(java.time.Instant,long,long,boolean,java.lang.Class,org.jlab.mya.nexus.DataNexus,org.jlab.mya.Metadata)" class="member-name-link">getMySamplerStream</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type,
 <a href="../nexus/DataNexus.html" title="class in org.jlab.mya.nexus">DataNexus</a>&nbsp;nexus,
 <a href="../Metadata.html" title="class in org.jlab.mya">Metadata</a>&lt;T&gt;&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Factory method that produces a MySamplerStream that exclusively performs the N_QUERIES strategy.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;<br><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,T,boolean,java.lang.Class)" class="member-name-link">getMySamplerStream</a><wbr>(<a href="EventStream.html" title="class in org.jlab.mya.stream">EventStream</a>&lt;T&gt;&nbsp;wrapped,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 T&nbsp;priorPoint,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Factory method that produces a MySamplerStream that will only perform sampling at an application level (i.e.,
 STREAM strategy).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;<br><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,T,boolean,java.lang.Class,org.jlab.mya.nexus.DataNexus,org.jlab.mya.Metadata,java.lang.Integer,java.lang.Integer,java.lang.Integer,java.lang.Double)" class="member-name-link">getMySamplerStream</a><wbr>(<a href="EventStream.html" title="class in org.jlab.mya.stream">EventStream</a>&lt;T&gt;&nbsp;wrapped,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 T&nbsp;priorPoint,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type,
 <a href="../nexus/DataNexus.html" title="class in org.jlab.mya.nexus">DataNexus</a>&nbsp;nexus,
 <a href="../Metadata.html" title="class in org.jlab.mya">Metadata</a>&lt;T&gt;&nbsp;metadata,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferSize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferCheck,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferDelay,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html" title="class or interface in java.lang" class="external-link">Double</a>&nbsp;streamThreshold)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Factory method that produces a MySamplerStream that initially uses the STREAM strategy until the underlying
 EventStream is observed to be too busy.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MySamplerStream.Strategy.html" title="enum in org.jlab.mya.stream">MySamplerStream.Strategy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStrategy()" class="member-name-link">getStrategy</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the current sampling strategy.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStreamThreshold()" class="member-name-link">getStreamThreshold</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is the maximum number of Events per requested sample before the STREAM strategy will be abandoned.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isStrategyLocked()" class="member-name-link">isStrategyLocked</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check if the strategy is locked.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#read()" class="member-name-link">read</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Read a sampled Event from the stream.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readStream()" class="member-name-link">readStream</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This does in app sampling of the full data stream.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setBuffer(int,int,int)" class="member-name-link">setBuffer</a><wbr>(int&nbsp;size,
 int&nbsp;check,
 int&nbsp;delay)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set up the buffer and related parameters used to determine if a stream is too busy to continue using the STREAM
 strategy.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setStreamThreshold(double)" class="member-name-link">setStreamThreshold</a><wbr>(double&nbsp;threshold)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is the maximum number of Events per requested sample before the STREAM strategy will be abandoned.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.jlab.mya.stream.WrappedStream">Methods inherited from class&nbsp;org.jlab.mya.stream.<a href="WrappedStream.html" title="class in org.jlab.mya.stream">WrappedStream</a></h3>
<code><a href="WrappedStream.html#isOpen()">isOpen</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.jlab.mya.stream.EventStream">Methods inherited from class&nbsp;org.jlab.mya.stream.<a href="EventStream.html" title="class in org.jlab.mya.stream">EventStream</a></h3>
<code><a href="EventStream.html#getType()">getType</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getBufferSize()">
<h3>getBufferSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getBufferSize</span>()</div>
<div class="block">This is how many Event updates will be used to estimate stream update rate.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The value of bufferSize.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBufferCheck()">
<h3>getBufferCheck</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getBufferCheck</span>()</div>
<div class="block">This is how many Events should be streamed between making estimates of stream update rate.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The value of bufferCheck</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBufferDelay()">
<h3>getBufferDelay</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getBufferDelay</span>()</div>
<div class="block">This is how many events should be skipped at the beginning of the stream prior to estimating the stream update
 rate.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The value of bufferDelay</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBufferCount()">
<h3>getBufferCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getBufferCount</span>()</div>
<div class="block">This is how many Events have been read since the last trackBuffer call.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The value of bufferCount</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStreamThreshold()">
<h3>getStreamThreshold</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getStreamThreshold</span>()</div>
<div class="block">This is the maximum number of Events per requested sample before the STREAM strategy will be abandoned.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The value of streamThreshold</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setBuffer(int,int,int)">
<h3>setBuffer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setBuffer</span><wbr><span class="parameters">(int&nbsp;size,
 int&nbsp;check,
 int&nbsp;delay)</span></div>
<div class="block">Set up the buffer and related parameters used to determine if a stream is too busy to continue using the STREAM
 strategy.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - How many event intervals should be stored</dd>
<dd><code>check</code> - How often should the buffer be checked</dd>
<dd><code>delay</code> - How many events should be skipped before checking the stream at the start of reading from the stream</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setStreamThreshold(double)">
<h3>setStreamThreshold</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setStreamThreshold</span><wbr><span class="parameters">(double&nbsp;threshold)</span></div>
<div class="block">This is the maximum number of Events per requested sample before the STREAM strategy will be abandoned.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>threshold</code> - the new threshold to be used</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,T,boolean,java.lang.Class)">
<h3 id="getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,org.jlab.mya.event.Event,boolean,java.lang.Class)">getMySamplerStream</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</span>&nbsp;<span class="return-type"><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</span>&nbsp;<span class="element-name">getMySamplerStream</span><wbr><span class="parameters">(<a href="EventStream.html" title="class in org.jlab.mya.stream">EventStream</a>&lt;T&gt;&nbsp;wrapped,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 T&nbsp;priorPoint,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type)</span></div>
<div class="block">Factory method that produces a MySamplerStream that will only perform sampling at an application level (i.e.,
 STREAM strategy).</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The Event type that is being streamed</dd>
<dt>Parameters:</dt>
<dd><code>wrapped</code> - The underlying EventStream to wrap</dd>
<dd><code>begin</code> - The time of the first sample point</dd>
<dd><code>intervalMillis</code> - The time between sample points</dd>
<dd><code>sampleCount</code> - The number of samples to return (including the first)</dd>
<dd><code>priorPoint</code> - The point to use as the first sampled value.  If null, an Event with EventCode.UNDEFINED
                       will be provided.</dd>
<dd><code>updatesOnly</code> - Should only non-disconnect events be processed</dd>
<dd><code>type</code> - The type of Event that is being streamed</dd>
<dt>Returns:</dt>
<dd>A MySamplerStream of the wrapped EventStream</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,T,boolean,java.lang.Class,org.jlab.mya.nexus.DataNexus,org.jlab.mya.Metadata,java.lang.Integer,java.lang.Integer,java.lang.Integer,java.lang.Double)">
<h3 id="getMySamplerStream(org.jlab.mya.stream.EventStream,java.time.Instant,long,long,org.jlab.mya.event.Event,boolean,java.lang.Class,org.jlab.mya.nexus.DataNexus,org.jlab.mya.Metadata,java.lang.Integer,java.lang.Integer,java.lang.Integer,java.lang.Double)">getMySamplerStream</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</span>&nbsp;<span class="return-type"><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</span>&nbsp;<span class="element-name">getMySamplerStream</span><wbr><span class="parameters">(<a href="EventStream.html" title="class in org.jlab.mya.stream">EventStream</a>&lt;T&gt;&nbsp;wrapped,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 T&nbsp;priorPoint,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type,
 <a href="../nexus/DataNexus.html" title="class in org.jlab.mya.nexus">DataNexus</a>&nbsp;nexus,
 <a href="../Metadata.html" title="class in org.jlab.mya">Metadata</a>&lt;T&gt;&nbsp;metadata,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferSize,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferCheck,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;bufferDelay,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html" title="class or interface in java.lang" class="external-link">Double</a>&nbsp;streamThreshold)</span></div>
<div class="block">Factory method that produces a MySamplerStream that initially uses the STREAM strategy until the underlying
 EventStream is observed to be too busy.  If the stream is too busy, then the strategy is switched to
 N_QUERIES and locked.
 <p>
 See class documentation for more details.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The Event type that is being streamed</dd>
<dt>Parameters:</dt>
<dd><code>wrapped</code> - The underlying EventStream to wrap</dd>
<dd><code>begin</code> - The time of the first sample point</dd>
<dd><code>intervalMillis</code> - The time between sample points</dd>
<dd><code>sampleCount</code> - The number of samples to return (including the first)</dd>
<dd><code>priorPoint</code> - The point to use as the first sampled value</dd>
<dd><code>updatesOnly</code> - Should only non-disconnect events be processed</dd>
<dd><code>type</code> - The type of Event that is being streamed</dd>
<dd><code>nexus</code> - A DataNexus that can be used to perform the N_QUERIES strategy if needed.  If null, only
                        STREAM strategy will be used.</dd>
<dd><code>metadata</code> - Metadata object for the wrapped EventStream.  Used in the switch to N_QUERIES.</dd>
<dd><code>bufferSize</code> - How many event intervals should be tracked when determining if the EventStream is too
                        busy.  If null, use default value.</dd>
<dd><code>bufferCheck</code> - How many events must pass before we check the if the stream is too busy.  If null, use
                        default value.</dd>
<dd><code>bufferDelay</code> - How events do we skip before we start checking  if the stream is too busy.  If null, use
                        default value.</dd>
<dd><code>streamThreshold</code> - How much faster may the EventStream be than the desired sampled rate before switching
                        strategies.  Based on estimated rates.  If null, use default value.</dd>
<dt>Returns:</dt>
<dd>A MySamplerStream of the wrapped EventStream</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMySamplerStream(java.time.Instant,long,long,boolean,java.lang.Class,org.jlab.mya.nexus.DataNexus,org.jlab.mya.Metadata)">
<h3>getMySamplerStream</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</span>&nbsp;<span class="return-type"><a href="MySamplerStream.html" title="class in org.jlab.mya.stream">MySamplerStream</a>&lt;T&gt;</span>&nbsp;<span class="element-name">getMySamplerStream</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;begin,
 long&nbsp;intervalMillis,
 long&nbsp;sampleCount,
 boolean&nbsp;updatesOnly,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;type,
 <a href="../nexus/DataNexus.html" title="class in org.jlab.mya.nexus">DataNexus</a>&nbsp;nexus,
 <a href="../Metadata.html" title="class in org.jlab.mya">Metadata</a>&lt;T&gt;&nbsp;metadata)</span></div>
<div class="block">Factory method that produces a MySamplerStream that exclusively performs the N_QUERIES strategy.  As such, there
 is no underlying EventStream or prior point to wrap.
<p>
 Created largely for API symmetry as it's just a wrapper on the constructor</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The type of Event that is to be streamed</dd>
<dt>Parameters:</dt>
<dd><code>begin</code> - The time of the first sample point</dd>
<dd><code>intervalMillis</code> - The time between sample points</dd>
<dd><code>sampleCount</code> - The number of samples to return (including the first)</dd>
<dd><code>updatesOnly</code> - Should only non-disconnect events be processed</dd>
<dd><code>type</code> - The type of Event that is being streamed</dd>
<dd><code>nexus</code> - A DataNexus that can be used to perform the n-query strategy if needed.</dd>
<dd><code>metadata</code> - Metadata object for the wrapped EventStream.  Used in the switch to n-query.</dd>
<dt>Returns:</dt>
<dd>A MySamplerStream of the wrapped EventStream</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="read()">
<h3>read</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a></span>&nbsp;<span class="element-name">read</span>()
       throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Read a sampled Event from the stream.  This generates Events at the requested sample times that have the same
 values and EventCodes as the nearest preceding Event from the underlying data.
 <p>
 If no preceding Event is found or if the sample time is from the future, then an Event with EventCode.UNDEFINED
 is returned.
 <p>
 This method is capable of performing any of the supported sampling strategies.  All should return the same
 results.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="BoundaryAwareStream.html#read()">read</a></code>&nbsp;in class&nbsp;<code><a href="BoundaryAwareStream.html" title="class in org.jlab.mya.stream">BoundaryAwareStream</a>&lt;<a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a> extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>The next sampled event or null if end of stream is reached.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - If trouble sapling data or an unsupported strategy is attempted.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readStream()">
<h3>readStream</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a></span>&nbsp;<span class="element-name">readStream</span>()
             throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a>,
<a href="https://docs.oracle.com/javase/8/docs/api/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">This does in app sampling of the full data stream.  The basic idea is to return the value of the signal only at
 the times that were requested based on sampling parameters.  Events are created so that timestamps are at sample
 times.  Events with code UNDEFINED is returned when requesting  a sample from the future.
 <p>
 We maintained two event update points.  When they straddle the sample time, we read out an event with the sample
 time timestamp, but the value and code of the previous update event.  Each read from this stream will iterate
 over the wrapped stream until we find two points that straddle the sample time or the end of the stream.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The next sample event</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - If trouble with the stream</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If trouble querying data from the database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStrategy()">
<h3>getStrategy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MySamplerStream.Strategy.html" title="enum in org.jlab.mya.stream">MySamplerStream.Strategy</a></span>&nbsp;<span class="element-name">getStrategy</span>()</div>
<div class="block">Get the current sampling strategy.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The current sampling strategy.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isStrategyLocked()">
<h3>isStrategyLocked</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isStrategyLocked</span>()</div>
<div class="block">Check if the strategy is locked.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>If we allow any changes to the sampling strategy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()
           throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Close this stream and the stream it wraps if it exists.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html#close--" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/Channel.html#close--" title="class or interface in java.nio.channels" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/Channel.html" title="class or interface in java.nio.channels" class="external-link">Channel</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html#close--" title="class or interface in java.io" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="WrappedStream.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="WrappedStream.html" title="class in org.jlab.mya.stream">WrappedStream</a>&lt;<a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a> extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>,<wbr><a href="MySamplerStream.html" title="type parameter in MySamplerStream">T</a> extends <a href="../event/Event.html" title="class in org.jlab.mya.event">Event</a>&gt;</code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - If trouble closing the stream</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
